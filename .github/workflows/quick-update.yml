name: ⚡ Quick Update Site

on:
  workflow_dispatch: # Запуск вручную с телефона
    inputs:
      update_type:
        description: 'Тип обновления'
        required: true
        default: 'seo'
        type: choice
        options:
        - seo
        - content
        - design
        - all

jobs:
  quick-update:
    runs-on: ubuntu-latest
    
    steps:
    - name: 📥 Checkout code
      uses: actions/checkout@v4
      
    - name: 🔄 Force update
      run: |
        echo "🔄 Force updating site..."
        echo "📅 Update time: $(date)"
        echo "🎯 Update type: ${{ github.event.inputs.update_type }}"
        
    - name: 🚀 Deploy to Netlify
      uses: nwtgck/actions-netlify@v2.0
      with:
        publish-dir: '.'
        production-branch: main
        github-token: ${{ secrets.GITHUB_TOKEN }}
        deploy-message: "⚡ Quick update: ${{ github.event.inputs.update_type }} - $(date)"
        enable-pull-request-comment: true
        enable-commit-comment: true
        
    - name: 📱 Success notification
      run: |
        echo "🎉 Quick update completed successfully!"
        echo "⏰ Update time: $(date)"
        echo "🌐 Site will be updated in 2-5 minutes"
        echo "📱 You can check status on your phone!"
        
    - name: 🔗 Get deployment URL
      id: netlify
      uses: nwtgck/actions-netlify@v2.0
      with:
        publish-dir: '.'
        production-branch: main
        github-token: ${{ secrets.GITHUB_TOKEN }}
        
    - name: 📊 Update summary
      run: |
        echo "📊 QUICK UPDATE SUMMARY"
        echo "========================"
        echo "✅ Status: Completed"
        echo "⏰ Time: $(date)"
        echo "🎯 Type: ${{ github.event.inputs.update_type }}"
        echo "🌐 Site: Will update automatically"
        echo "📱 Check: Your phone for notifications"